# Вероятность случайного инфицирования [номер недели (1-52), вирус (1-7)]
# Probability of random infection [week num (1-52), virus (1-7)]
function get_random_infection_probabilities()::Matrix{Float64}
    # return [
    #     0.009388732 0.014083099 0.436619718 0.507042254 0.830985915 0.985915493;
    #     0.0101 0.01515 0.424242424 0.484848485 0.833333333 0.984848485;
    #     0.009949254 0.014923881 0.492537313 0.567164179 0.850746269 0.985074627;
    #     0.009802941 0.024507353 0.5 0.588235294 0.823529412 0.985294118;
    #     0.007842353 0.019605882 0.494117647 0.529411765 0.811764706 0.976470588;
    #     0.007245652 0.01811413 0.5 0.554347826 0.77173913 0.956521739;
    #     0.007489888 0.018724719 0.539325843 0.584269663 0.831460674 0.988764045;
    #     0.005290476 0.01322619 0.603174603 0.626984127 0.785714286 0.968253968;
    #     0.004328571 0.010821429 0.655844156 0.688311688 0.805194805 0.987012987;
    #     0.003831034 0.005746552 0.706896552 0.74137931 0.827586207 0.994252874;
    #     0.003682873 0.005524309 0.685082873 0.718232044 0.82320442 0.988950276;
    #     0.003100465 0.004650698 0.627906977 0.646511628 0.753488372 0.981395349;
    #     0.003622826 0.005434239 0.684782609 0.717391304 0.798913043 0.989130435;
    #     0.003471875 0.005207813 0.671875 0.697916667 0.802083333 0.994791667;
    #     0.003366667 0.00505 0.601010101 0.631313131 0.782828283 0.974747475;
    #     0.00314434 0.004716509 0.622641509 0.655660377 0.787735849 0.966981132;
    #     0.002962667 0.004444 0.555555556 0.577777778 0.742222222 0.982222222;
    #     0.003526984 0.005290476 0.481481481 0.523809524 0.73015873 0.973544974;
    #     0.003333 0.0049995 0.505 0.59 0.79 0.965;
    #     0.002885714 0.004328571 0.489177489 0.606060606 0.744588745 0.965367965;
    #     0.026452381 0.039678571 0.547619048 0.634920635 0.793650794 0.98015873;
    #     0.06666 0.09999 0.5 0.608 0.776 0.976;
    #     0.093740625 0.140610938 0.45703125 0.61328125 0.82421875 0.94140625;
    #     0.183805147 0.275707721 0.485294118 0.602941176 0.768382353 0.952205882;
    #     0.285828571 0.3837428565 0.5861323935077808 0.760876494335739 0.8344529571713465 0.9908029420006954;
    #     0.442138095 0.6182071425 0.7357082971723728 0.8296786803830067 0.8678541485861865 0.9794439786010949;
    #     0.4633 0.64995 0.7735237035600002 0.8517609691458389 0.9155861074620103 0.9814701214288988;
    #     0.490324324 0.690486486 0.8030583391314282 0.8762080987347048 0.9324771448820379 0.9788991075329766;
    #     0.477791304 0.671686956 0.7781863457981584 0.8780024898806661 0.9223652207210344 0.9778186345798159;
    #     0.441719424 0.617579136 0.7396514279801136 0.837282142487571 0.9186410712437856 0.9742363390468531;
    #     0.44325188 0.61987782 0.7296428303202727 0.8250630080185664 0.9236638578413648 0.96024159285843;
    #     0.433690205 0.6055 0.7238714002603696 0.8698250886041506 0.934912544652167 0.9704147929600593;
    #     0.421050704 0.586576056 0.719607540107431 0.9137253965999733 0.9640522487486819 0.9838235117384753;
    #     0.379975 0.5249625 0.6652060908859256 0.9106047679388104 0.9631901986002619 0.9859772183637241;
    #     0.296188366 0.399282549 0.5692328398127077 0.8853922238201505 0.9525760928470395 0.9881440230250282;
    #     0.130498413 0.195747619 0.423280423 0.846560847 0.936507937 0.984126984;
    #     0.103303509 0.154955263 0.444444444 0.795321637 0.888888889 0.947368421;
    #     0.097392857 0.146089286 0.405844156 0.788961039 0.88961039 0.935064935;
    #     0.090296414 0.135444622 0.434262948 0.824701195 0.87250996 0.940239044;
    #     0.09393 0.140895 0.422727273 0.786363636 0.863636364 0.945454545;
    #     0.087369903 0.131054854 0.441747573 0.757281553 0.849514563 0.951456311;
    #     0.06666 0.09999 0.415789474 0.773684211 0.884210526 0.973684211;
    #     0.061722222 0.092583333 0.401234568 0.808641975 0.932098765 0.981481481;
    #     0.056332394 0.084498592 0.422535211 0.788732394 0.908450704 0.992957746;
    #     0.03749625 0.056244375 0.43125 0.7 0.85 0.96875;
    #     0.00404 0.00606 0.424242424 0.709090909 0.860606061 0.957575758;
    #     0.005248819 0.007873228 0.322834646 0.661417323 0.803149606 0.937007874;
    #     0.005375806 0.00806371 0.387096774 0.693548387 0.846774194 0.975806452;
    #     0.006666 0.009999 0.39 0.7 0.82 0.98;
    #     0.008129268 0.012193902 0.463414634 0.695121951 0.817073171 0.987804878;
    #     0.008437975 0.012656962 0.506329114 0.594936709 0.734177215 0.987341772;
    #     0.010255385 0.015383077 0.369230769 0.461538462 0.784615385 0.984615385]
    
    return [
        0.009388732 0.014083099 0.436619718 0.507042254 0.830985915 0.985915493;
        0.0101 0.01515 0.424242424 0.484848485 0.833333333 0.984848485;
        0.009949254 0.014923881 0.492537313 0.567164179 0.850746269 0.985074627;
        0.009802941 0.024507353 0.5 0.588235294 0.823529412 0.985294118;
        0.007842353 0.019605882 0.494117647 0.529411765 0.811764706 0.976470588;
        0.007245652 0.01811413 0.5 0.554347826 0.77173913 0.956521739;
        0.007489888 0.018724719 0.539325843 0.584269663 0.831460674 0.988764045;
        0.005290476 0.01322619 0.603174603 0.626984127 0.785714286 0.968253968;
        0.004328571 0.010821429 0.655844156 0.688311688 0.805194805 0.987012987;
        0.003831034 0.005746552 0.706896552 0.74137931 0.827586207 0.994252874;
        0.003682873 0.005524309 0.685082873 0.718232044 0.82320442 0.988950276;
        0.003100465 0.004650698 0.627906977 0.646511628 0.753488372 0.981395349;
        0.003622826 0.005434239 0.684782609 0.717391304 0.798913043 0.989130435;
        0.003471875 0.005207813 0.671875 0.697916667 0.802083333 0.994791667;
        0.003366667 0.00505 0.601010101 0.631313131 0.782828283 0.974747475;
        0.00314434 0.004716509 0.622641509 0.655660377 0.787735849 0.966981132;
        0.002962667 0.004444 0.555555556 0.577777778 0.742222222 0.982222222;
        0.003526984 0.005290476 0.481481481 0.523809524 0.73015873 0.973544974;
        0.003333 0.0049995 0.505 0.59 0.79 0.965;
        0.002885714 0.004328571 0.489177489 0.606060606 0.744588745 0.965367965;
        0.026452381 0.039678571 0.447619048 0.634920635 0.793650794 0.98015873;
        0.06666 0.09999 0.35 0.588 0.776 0.976;
        0.093740625 0.140610938 0.40703125 0.61328125 0.82421875 0.94140625;
        0.183805147 0.275707721 0.455294118 0.602941176 0.768382353 0.952205882;
        0.285828571 0.3837428565 0.5861323935077808 0.760876494335739 0.8344529571713465 0.9908029420006954;
        0.442138095 0.6182071425 0.7357082971723728 0.8296786803830067 0.8678541485861865 0.9794439786010949;
        0.4633 0.64995 0.7735237035600002 0.8517609691458389 0.9155861074620103 0.9814701214288988;
        0.490324324 0.690486486 0.8030583391314282 0.8762080987347048 0.9324771448820379 0.9788991075329766;
        0.477791304 0.671686956 0.7781863457981584 0.8780024898806661 0.9223652207210344 0.9778186345798159;
        0.441719424 0.617579136 0.7396514279801136 0.837282142487571 0.9186410712437856 0.9742363390468531;
        0.44325188 0.61987782 0.7296428303202727 0.8250630080185664 0.9236638578413648 0.96024159285843;
        0.433690205 0.6055 0.7238714002603696 0.8698250886041506 0.934912544652167 0.9704147929600593;
        0.421050704 0.586576056 0.719607540107431 0.9137253965999733 0.9640522487486819 0.9838235117384753;
        0.379975 0.5249625 0.6652060908859256 0.9106047679388104 0.9631901986002619 0.9859772183637241;
        0.296188366 0.399282549 0.5692328398127077 0.8853922238201505 0.9525760928470395 0.9881440230250282;
        0.130498413 0.195747619 0.423280423 0.846560847 0.936507937 0.984126984;
        0.103303509 0.154955263 0.444444444 0.795321637 0.888888889 0.947368421;
        0.097392857 0.146089286 0.405844156 0.788961039 0.88961039 0.935064935;
        0.090296414 0.135444622 0.434262948 0.824701195 0.87250996 0.940239044;
        0.09393 0.140895 0.422727273 0.786363636 0.863636364 0.945454545;
        0.087369903 0.131054854 0.441747573 0.757281553 0.849514563 0.951456311;
        0.06666 0.09999 0.415789474 0.773684211 0.884210526 0.973684211;
        0.061722222 0.092583333 0.401234568 0.808641975 0.932098765 0.981481481;
        0.056332394 0.084498592 0.422535211 0.788732394 0.908450704 0.992957746;
        0.03749625 0.056244375 0.43125 0.7 0.85 0.96875;
        0.00404 0.00606 0.424242424 0.709090909 0.860606061 0.957575758;
        0.005248819 0.007873228 0.322834646 0.661417323 0.803149606 0.937007874;
        0.005375806 0.00806371 0.387096774 0.693548387 0.846774194 0.975806452;
        0.006666 0.009999 0.39 0.7 0.82 0.98;
        0.008129268 0.012193902 0.463414634 0.695121951 0.817073171 0.987804878;
        0.008437975 0.012656962 0.506329114 0.594936709 0.734177215 0.987341772;
        0.010255385 0.015383077 0.369230769 0.461538462 0.784615385 0.984615385]
end

function save_virus_ratio_to_file()
    etiology_data = get_random_infection_probabilities()
    etiology_data[:, 2] = etiology_data[:, 2] .- etiology_data[:, 1]
    etiology_data[:, 3] = etiology_data[:, 3] .- etiology_data[:, 2] .- etiology_data[:, 1]
    etiology_data[:, 4] = etiology_data[:, 4] .- etiology_data[:, 3] .- etiology_data[:, 2] .- etiology_data[:, 1]
    etiology_data[:, 5] = etiology_data[:, 5] .- etiology_data[:, 4] .- etiology_data[:, 3] .- etiology_data[:, 2] .- etiology_data[:, 1]
    etiology_data[:, 6] = etiology_data[:, 6] .- etiology_data[:, 5] .- etiology_data[:, 4] .- etiology_data[:, 3] .- etiology_data[:, 2] .- etiology_data[:, 1]
    etiology_data = [etiology_data (1 .- etiology_data[:, 6] .- etiology_data[:, 5] .- etiology_data[:, 4] .- etiology_data[:, 3] .- etiology_data[:, 2] .- etiology_data[:, 1])]
    etiology_data = transpose(etiology_data)

    writedlm(
        joinpath(@__DIR__, "..", "..", "input", "tables", "etiology_ratio.csv"), etiology_data, ',')
end
